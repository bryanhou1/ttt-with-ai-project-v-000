#!/usr/bin/env ruby

require_relative '../config/environment'

puts "Welcome to Tic-tac-toe!"
puts "Select a play mode(1-3):"
puts "1) 0 player mode"
puts "2) 1 player mode"
puts "3) 2 player mode"
#wargames is a secret option

input=""
loop do
	input = gets.strip
	break if ["1","2","3","wargames"].include?(input)
	puts "Input not recognized. Please retry:"
end


puts "#{input.to_i-1} player mode selected" if ["1","2","3"].include?(input)

puts "Game Start!"

case input 
	when "1"
		game=Game.new(Players::Computer.new("X"), Players::Computer.new("O"), Board.new)
		game.board.display
		game.play
	when "2"
		player_selection  = ""
		until player_selection=="1" || player_selection=="2"
			puts "Please select the starting player who will have token 'X':"
			puts "1. Computer"
			puts "2. Human User"
			player_selection = gets.strip
			#idea: add menu item to go one level before?
		end
		player_selection=="1" ?	game=Game.new(Players::Computer.new("X"), Players::Human.new("O"), Board.new) : game=Game.new(Players::Human.new("X"), Players::Computer.new("O"), Board.new)
		game.board.display
		game.play
	when "3"
		game=Game.new
		game.board.display
		game.play
	else #wargames scenario
		win_count=0
		100.times {
			game=Game.new(Players::Computer.new("X"), Players::Computer.new("O"), Board.new)
			game.play
			game.board.display
			game.won?
		}
		puts "Games has been won #{win_count} times"
end
